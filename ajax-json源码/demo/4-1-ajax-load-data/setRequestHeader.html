<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>XHR 对象</title>
</head>
<body>
  <button id="btn">获取数据</button>
  <pre id="store"></pre>
  <script>
  var btn = document.getElementById('btn'),
  	store = document.getElementById('store')

  btn.addEventListener('click', ajax)

  function ajax () {
  	var src = './postdata.php'
  	
    var xhr = new XMLHttpRequest()

    xhr.open('POST', src)

    xhr.onreadystatechange = loadData
    xhr.responseType = 'json'
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
    xhr.setRequestHeader("Custom-key", "custom-value")
    xhr.send('name=123')

    function loadData () {
      if (xhr.readyState === 4) {
        store.innerHTML = JSON.stringify(xhr.response, null, 2)
      }
    }
  }
  </script>
</body>
</html>
  